"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Component = void 0;

class Component extends HTMLElement {
  constructor(props) {
    super(props);
    this.attachShadow({
      mode: 'open'
    });
    this.props = props || {};
    this.state = {};

    if (this.attributes.length > 0) {
      // Map attributes to props
      for (const attribute of this.attributes) {
        this.props[attribute.name] = attribute.value;
      }
    }

    this._currentElement = null;
    this._pendingState = null;
    this._parentNode = null;
  }

  static define(Component, target, attributes = {}) {
    const tagName = this.getTagName(Component); // Check if the custom element is not defined yet

    if (window.customElements.get(tagName) === undefined) {
      window.customElements.define(tagName, Component);
    }

    if (target !== undefined) {
      const instance = new Component(attributes); // target.appendChild(instance)

      if (target.childNodes.length > 0) {
        target.replaceChild(instance, target.childNodes[0]);
      } else {
        target.appendChild(instance);
      }

      return instance;
    }
  }

  static getTagName(component) {
    return component.name.split(/(?=[A-Z])/g).map(value => {
      return value.charAt(0).toLowerCase() + value.substring(1);
    }).join('-');
  } // can be overridden


  static get viewEncapsulation() {
    return ViewEncapsulation.ShadowDom;
  }

}

exports.Component = Component;